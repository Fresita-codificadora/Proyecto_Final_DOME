module test_uart_tx_rx (
    //ports
    //entradas
    input           clk;
    input           reset;
    input   [7:0]   rx_in;
    input           i_rx_dv;//entrada del modulo rx mostrando que tiene un byte
    input           i_tx_done;

    //output
    output reg   [7:0]  tx_out;
    output              o_uart_tx
);
reg     [7:0]  registro_entrada;
reg     [7:0] dato_prev ;
    always @(posedge clk or negedge reset ) begin
        if (!reset) begin
            registro_entrada <= 8'h00;
            dato_prev <= 8'h00;
        end
        if (i_rx_dv) begin //si recibo un nuevo byte
            registro_entrada <= rx_in;
        end
        if (registro_entrada != dato_prev) begin
            dato_prev<=registro_entrada;           //actualizo dato_prev
            if (!i_tx_done) begin                   //verifico que no este mandando otro dato
               tx_out<=registro_entrada+10;
               o_uart_tx <= 1'b1; 
            end 
        end
    end
    
endmodule